<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:helpers="clr-namespace:WeatherApp.Helpers"
        x:Class="WeatherApp.MainWindow"
        Title="Application Météo">
    <TabControl>
        <TabItem Header="Recherche">
            <StackPanel Margin="10">
                <Grid ColumnDefinitions="*,Auto,Auto" RowDefinitions="Auto" Margin="0,0,0,10">
                    <TextBox Name="SearchBox" Grid.Column="0" 
                            Watermark="Entrez le nom d'une ville..." 
                            Margin="0,0,10,0"/>
                    <ComboBox Name="SearchHistory" Grid.Column="1"
                             Width="150"
                             Margin="0,0,10,0"
                             PlaceholderText="Historique"
                             SelectionChanged="OnHistorySelectionChanged"/>
                    <Button Name="SearchButton" Grid.Column="2" 
                            Content="Rechercher" 
                            Click="OnSearchClick"/>
                </Grid>
                <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto">
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Ville : " Margin="0,0,10,5"/>
                    <TextBlock Grid.Row="0" Grid.Column="1" Name="CityName"/>
                    
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Coordonnées : " Margin="0,0,10,5"/>
                    <TextBlock Grid.Row="1" Grid.Column="1" Name="Coordinates"/>
                    
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Température : " Margin="0,0,10,5"/>
                    <TextBlock Grid.Row="2" Grid.Column="1" Name="Temperature"/>
                    
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Description : " Margin="0,0,10,5"/>
                    <TextBlock Grid.Row="3" Grid.Column="1" Name="WeatherDescription"/>
                    
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Humidité : " Margin="0,0,10,5"/>
                    <TextBlock Grid.Row="4" Grid.Column="1" Name="Humidity"/>
                </Grid>
            </StackPanel>
        </TabItem>
        
        <TabItem Header="Prévisions">
            <ListBox Name="ForecastList" Margin="10">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="LightGray" BorderThickness="1" CornerRadius="4" Padding="10" Margin="0,5">
                            <Grid ColumnDefinitions="150,80,150,80,Auto" Margin="0,5">
                                <TextBlock Grid.Column="0" 
                                         Text="{Binding Date, StringFormat='{}{0:dd/MM/yyyy à HH:mm}'}" 
                                         VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" 
                                         Text="{Binding Temperature, StringFormat='{}{0:F1}°'}"
                                         VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="2" 
                                         Text="{Binding Description}"
                                         VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="3" 
                                         Text="{Binding Humidity, StringFormat='Humidité: {0}%'}"
                                         VerticalAlignment="Center"/>
                                <Image Grid.Column="4" 
                                       Height="40" 
                                       Width="40"
                                       Source="{Binding IconUrl, Converter={x:Static helpers:UrlToImageConverter.Instance}}"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </TabItem>
        
        <TabItem Header="Paramètres">
            <StackPanel Margin="10" Spacing="10">
                <TextBlock Text="Ville par défaut" FontWeight="Bold"/>
                <TextBox Name="DefaultCityBox" Watermark="Entrez une ville par défaut" Margin="0,0,0,10"/>
                
                <TextBlock Text="Unité de température" FontWeight="Bold"/>
                <ComboBox Name="TemperatureUnit" HorizontalAlignment="Stretch" Margin="0,0,0,10"
                         SelectionChanged="OnTemperatureUnitChanged">
                    <ComboBoxItem>Celsius (°C)</ComboBoxItem>
                    <ComboBoxItem>Fahrenheit (°F)</ComboBoxItem>
                </ComboBox>

                <TextBlock Text="Historique" FontWeight="Bold"/>
                <Button Name="ClearHistoryButton" 
                        Content="Effacer l'historique des recherches" 
                        Click="OnClearHistory"
                        Margin="0,0,0,10"/>

                <Button Name="SaveButton" 
                        Content="Sauvegarder" 
                        Click="OnSaveSettings"
                        Background="#2196F3"
                        Foreground="White"
                        HorizontalAlignment="Right"/>
            </StackPanel>
        </TabItem>
    </TabControl>
</Window> 